######################################################################################
# 1. Prefixes
######################################################################################

@prefix rr:         <http://www.w3.org/ns/r2rml#>.
@prefix rml:        <http://semweb.mmlab.be/ns/rml#>.
@prefix ex:         <http://example.com/ns#>.
@prefix geosparql:  <http://www.opengis.net/ont/geosparql#> .
@prefix ql:         <http://semweb.mmlab.be/ns/ql#>.
@prefix xsd:        <http://www.w3.org/2001/XMLSchema#>.
@prefix rdfs:       <http://www.w3.org/2000/01/rdf-schema#>.
@prefix dcterms:    <http://purl.org/dc/terms/> .


######################################################################################
# 2. Mapping Document Metadata
######################################################################################

[]  dcterms:title "KB Mappings - SGD kaarten";
    dcterms:description "Describes an RML mapping from the sgd_kaarten.xml input source to RDF " ;
    dcterms:creator <http://rml.io/people/AnastasiaDimou> ;
    dcterms:created "2016-03-18"^^xsd:date;
    dcterms:modified "2016-03-21"^^xsd:date .


######################################################################################
# 3. Input Sources
######################################################################################

<#SGD_Kaarten_LogicalSource>
  rml:source "Input/Sample/sgd_kaarten_sample.xml" ;
  rml:iterator "/data/metadata/srw_dc:dc";
  rml:referenceFormulation ql:XPath .


######################################################################################
# 4. Mapping Definitions
######################################################################################

<#SGD_Kaarten_Mapping>
  rml:logicalSource <#SGD_Kaarten_LogicalSource> ;

  rr:subjectMap [ 
    rr:termType rr:BlankNode ;
    rr:class ex:Record ];

  rr:predicateObjectMap [
    rr:predicateMap [ rr:constant dcterms:title ] ;
    rr:objectMap [
      rml:reference "dc:title";
      rr:language "nl" ] ];

  rr:predicateObjectMap [
    rr:predicateMap [ rr:constant dcterms:date ] ;
    rr:objectMap [
      rml:reference "dc:date";
      rr:datatype xsd:gYear ] ];

  rr:predicateObjectMap [
    rr:predicate geosparql:asWKT ;
      rr:objectMap [ 
        rr:template "MULTIPOLYGON((({dcterms:spatial})))" ;
        rr:termType rr:Literal ;
        rr:datatype <http://www.openlinksw.com/schemas/virtrdf#Geometry> ] ] .