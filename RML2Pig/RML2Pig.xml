<project name="RML2Pig" default="transformAll" basedir=".">

	<property name="metamodelPath" value="./metamodels/" />
	<property name="samplePath" value="./samples/" />
	<property name="transformationPath" value="./transformations/" />	
	
	<property name="sourceName" value="example_rml" />
	<property name="targetName" value="${sourceName}-pig" />
	<property name="transformationName" value="RML2Pig" />	
	
	
	<target name="transformAll">
		<!-- Loading metamodels -->
		<atl.loadModel modelHandler="EMF" name="RML" metamodel="MOF" path="${metamodelPath}RML.ecore" />
		<atl.loadModel modelHandler="EMF" name="Pig" metamodel="MOF" path="${metamodelPath}Pig.ecore" />
		
		<atl.loadModel modelHandler="EMF" name="{$sourceName}" metamodel="RML" path="${samplePath}${sourceName}.xmi" />
		
		<atl.launch path="${transformationPath}${transformationName}.atl">
		    <inmodel name="IN" model="{$sourceName}"/>
			<outModel name="OUT" model="${targetName}" metamodel="Pig" />
		</atl.launch>
		
		<atl.saveModel model="${targetName}" path="${samplePath}${targetName}.xmi" />
		  
		<!-- model to text -->
		<atl.loadModel name="${targetName}" metamodel="Pig" path="${samplePath}${targetName}.xmi" />
		
		<atl.launch  path="${transformationPath}Pig2Text.atl">
			<inmodel name="IN" model="${targetName}"/>			
		</atl.launch>		
	
	</target>
</project>